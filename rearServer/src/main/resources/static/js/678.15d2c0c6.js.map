{"version":3,"file":"js/678.15d2c0c6.js","mappings":"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","sources":["webpack://PandoraNext-TokensTool/./src/views/loginIndex.vue","webpack://PandoraNext-TokensTool/./src/views/loginIndex.vue?41fe"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-8f916fe6\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"content_login\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"meta\", {\n  name: \"viewport\",\n  content: \"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0,user-scalable=no\"\n}, null, -1));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"login-container\"\n}, [/*#__PURE__*/_createElementVNode(\"h4\", null, \"PandoraNext-TokensTool\")], -1));\nconst _hoisted_4 = {\n  class: \"container\"\n};\nconst _hoisted_5 = {\n  style: {\n    \"display\": \"flex\",\n    \"transform\": \"translate(0vw, 2vh)\",\n    \"font-size\": \"14.6px\",\n    \"justify-content\": \"center\"\n  }\n};\nconst _hoisted_6 = {\n  style: {\n    \"display\": \"flex\",\n    \"transform\": \"translate(0vw, 2vh)\",\n    \"margin-top\": \"5vh\",\n    \"font-size\": \"14.6px\",\n    \"justify-content\": \"center\"\n  }\n};\nconst _hoisted_7 = {\n  style: {\n    \"display\": \"flex\",\n    \"transform\": \"translate(0.5vw, 0vh)\",\n    \"margin-top\": \"6vh\"\n  }\n};\nconst _hoisted_8 = {\n  style: {\n    \"margin\": \"3.5vh 16px 0px 16px\",\n    \"justify-content\": \"center\"\n  }\n};\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"bottom\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  style: {\n    \"text-align\": \"center\",\n    \"transform\": \"translateY(0vh)\"\n  }\n}, [/*#__PURE__*/_createElementVNode(\"h3\", null, [/*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"https://github.com/Yanyutin753/PandoraNext-TokensTool\"\n}, \"Powered by tokensTool v0.6.8\")])])], -1));\nimport { ref, onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport axios from \"axios\";\nimport png from \"../asserts/chatGpt.jpg\";\nimport { ElMessage } from \"element-plus\";\nimport { ElLoading } from \"element-plus\";\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'loginIndex',\n  setup(__props) {\n    const router = useRouter();\n    const path = window.location.pathname; // 假设是 \"/api/getData\"\n    const parts = path.split(\"/\"); // 分割路径，得到 [\"\", \"api\", \"getData\"]\n    let prefix = \"\"; // 默认值为 \"\"\n    if (parts.length >= 3) {\n      prefix = \"/\" + parts[1]; // 如果parts长度大于或等于3，获取第一个部分\n    }\n\n    const username = ref(\"\");\n    const password = ref(\"\");\n    const checked = ref(\"\");\n    const image = png;\n    const page = ref(true);\n    onMounted(async () => {\n      const savedUsername = localStorage.getItem(\"savedUsername\");\n      const savedPassword = localStorage.getItem(\"savedPassword\");\n      const savedRemember = localStorage.getItem(\"savedRemember\");\n      if (savedRemember === \"true\") {\n        username.value = savedUsername || \"\";\n        password.value = savedPassword || \"\";\n        checked.value = \"true\";\n      }\n      if (window.innerWidth > 767) {\n        page.value = false;\n      }\n      fetchLoginToken();\n    });\n    // 自定义校验函数，直接返回错误提示\n    const customValidator = value => {\n      // 不允许有空格和回车符\n      const regex = /^[^\\s]*$/;\n      if (regex.test(value)) {\n        return true;\n      } else {\n        return \"此项不允许包含空格\";\n      }\n    };\n    /**\r\n     * 用jwt令牌验证身份\r\n     * 未通过者返回到/login\r\n     */\n    const token = localStorage.getItem(\"jwtToken\"); // 从localStorage获取JWT令牌\n    const headers = {\n      Authorization: `Bearer ${token}`\n    };\n    /**\r\n     * 用jwt令牌验证身份函数\r\n     */\n    const fetchLoginToken = async () => {\n      axios.post(`${prefix}/api/loginToken?token=` + token).then(response => {\n        if (response.data.code == 1) {\n          if (window.innerWidth <= 1000) {\n            router.replace(`/iphone`);\n          } else {\n            router.replace(`/home`);\n          }\n          return;\n        } else {\n          ElMessage.error(\"令牌失效，请重新登录！\");\n        }\n      }).catch(error => {\n        ElMessage.error(\"令牌失效，请重新登录！\");\n      });\n    };\n    const submit = () => {\n      const loadingInstance = ElLoading.service({\n        fullscreen: true\n      });\n      // 处理登录逻辑\n      if (checked.value) {\n        // 如果记住密码被选中，将用户名和密码保存到本地存储\n        localStorage.setItem(\"savedUsername\", username.value);\n        localStorage.setItem(\"savedPassword\", password.value);\n        localStorage.setItem(\"savedRemember\", \"true\");\n      } else {\n        // 如果不记住密码，清除本地存储中的信息\n        localStorage.removeItem(\"savedUsername\");\n        localStorage.removeItem(\"savedPassword\");\n        localStorage.removeItem(\"savedRemember\");\n      }\n      let setting = {\n        loginUsername: username.value,\n        loginPassword: password.value\n      };\n      fetch(`${prefix}/api/login`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${setting}`\n        },\n        body: JSON.stringify(setting)\n      }).then(response => response.json()).then(data => {\n        if (data.code === 1) {\n          const token = data.data;\n          localStorage.setItem(\"jwtToken\", token);\n          ElMessage.success(\"登录成功！\");\n          if (window.innerWidth <= 1000) {\n            router.replace(`/iphone`);\n          } else {\n            router.replace(`/home`);\n          }\n        } else {\n          ElMessage.error(data.msg);\n        }\n        loadingInstance.close();\n      }).catch(error => {\n        console.error(\"登录时出现错误:\", error);\n        ElMessage.error(\"账号或密码错误！\");\n        loadingInstance.close();\n      });\n    };\n    return (_ctx, _cache) => {\n      const _component_van_field = _resolveComponent(\"van-field\");\n      const _component_h9 = _resolveComponent(\"h9\");\n      const _component_van_checkbox = _resolveComponent(\"van-checkbox\");\n      const _component_van_cell_group = _resolveComponent(\"van-cell-group\");\n      const _component_van_button = _resolveComponent(\"van-button\");\n      const _component_van_form = _resolveComponent(\"van-form\");\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_van_form, {\n        onSubmit: submit\n      }, {\n        default: _withCtx(() => [_createVNode(_component_van_cell_group, {\n          inset: \"\"\n        }, {\n          default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_van_field, {\n            modelValue: username.value,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => username.value = $event),\n            clearable: \"\",\n            name: \"username\",\n            label: \"Username\",\n            placeholder: \"username\",\n            class: \"userName\",\n            \"input-align\": \"center\",\n            rules: [{\n              validator: customValidator\n            }]\n          }, null, 8, [\"modelValue\", \"rules\"])]), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_van_field, {\n            modelValue: password.value,\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => password.value = $event),\n            clearable: \"\",\n            type: \"password\",\n            name: \"password\",\n            label: \"Password\",\n            placeholder: \"password\",\n            class: \"userName\",\n            \"input-align\": \"center\",\n            rules: [{\n              validator: customValidator\n            }]\n          }, null, 8, [\"modelValue\", \"rules\"])]), _createElementVNode(\"div\", _hoisted_7, [_createVNode(_component_van_checkbox, {\n            class: \"remember\",\n            modelValue: checked.value,\n            \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => checked.value = $event),\n            \"checked-color\": \"#0ea27e\",\n            \"icon-size\": \"13.5px\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_h9, {\n              style: {\n                \"font-size\": \"13.5px\",\n                \"transform\": \"translateX(7px)\"\n              }\n            }, {\n              default: _withCtx(() => [_createTextVNode(\"Remember me\")]),\n              _: 1\n            })]),\n            _: 1\n          }, 8, [\"modelValue\"])])]),\n          _: 1\n        }), _createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_van_button, {\n          round: \"\",\n          block: \"\",\n          color: \"#0ea27e\",\n          \"native-type\": \"submit\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_h9, {\n            style: {\n              \"font-weight\": \"bold\"\n            }\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"Continue\")]),\n            _: 1\n          })]),\n          _: 1\n        })])]),\n        _: 1\n      })]), _hoisted_9]);\n    };\n  }\n});","/* unplugin-vue-components disabled */import script from \"./loginIndex.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./loginIndex.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./loginIndex.vue?vue&type=style&index=0&id=8f916fe6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-8f916fe6\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_hoisted_1","class","_hoisted_2","_","name","content","_hoisted_3","_hoisted_4","_hoisted_5","style","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","href","__name","setup","__props","router","path","window","location","pathname","parts","split","prefix","length","username","password","checked","page","async","savedUsername","localStorage","getItem","savedPassword","savedRemember","value","innerWidth","fetchLoginToken","customValidator","regex","test","token","axios","post","then","response","data","code","error","replace","catch","submit","loadingInstance","service","fullscreen","setItem","removeItem","setting","loginUsername","loginPassword","fetch","method","headers","Authorization","body","JSON","stringify","json","success","msg","close","console","_ctx","_cache","_component_van_field","_component_h9","_component_van_checkbox","_component_van_cell_group","_component_van_button","_component_van_form","onSubmit","default","inset","modelValue","$event","clearable","label","placeholder","rules","validator","type","round","block","color","__exports__"],"sourceRoot":""}